(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{16:function(e,t,n){},83:function(e,t,n){},88:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(1),s=n.n(r),o=n(8),i=n.n(o),c=(n(16),n(27)),l=n(28),h=n(36),u=n(35),p=n(9),d=n(29);var m=Object(d.a)((function(e,t){switch(t.type){case"TOKEN_CLEAR":return sessionStorage.clear(),{token:t.token};case"TOKEN_UPDATE":return sessionStorage.setItem("access_token",t.rtoken),{token:t.token};case"NEW_TOKEN":return sessionStorage.setItem("access_token",t.token),sessionStorage.setItem("refresh_token",t.rtoken),{token:t.token};default:return e}}),{token:sessionStorage.getItem("access_token")});m.subscribe((function(){return console.log(m.getState())}));var f=m,j=n(6),v=n(14),b=n(15);var g=function(e){return Object(a.jsx)("div",{className:"p-align-center p-fluid",children:Object(a.jsxs)("form",{children:[Object(a.jsx)(v.Messages,{ref:function(t){return e.messageText.current=t}}),Object(a.jsxs)("div",{className:"p-field p-grid",children:[Object(a.jsxs)("div",{className:"p-field p-grid ",children:[Object(a.jsx)("label",{htmlFor:"x_value",className:"p-sm-2 p-md-4 p-xl-6",children:"X:"}),Object(a.jsx)("div",{className:"p-sm-12 p-md-7 p-xl-5 p-col",children:Object(a.jsx)(b.InputNumber,{id:"x_value",value:e.x,onValueChange:function(t){return e.setX(t.value)},mode:"decimal",min:-3,max:5,minFractionDigits:1,maxFractionDigits:5,placeholder:"Enter X [-3;5]"})})]}),Object(a.jsxs)("div",{className:"p-field p-grid ",children:[Object(a.jsx)("label",{htmlFor:"y_value",className:"p-sm-2 p-md-4 p-xl-6",children:"Y:"}),Object(a.jsx)("div",{className:"p-sm-12 p-md-7 p-xl-5 p-col",children:Object(a.jsx)(b.InputNumber,{id:"y_value",value:e.y,onValueChange:function(t){return e.setY(t.value)},mode:"decimal",min:-5,max:5,minFractionDigits:1,maxFractionDigits:5,placeholder:"Enter Y [-5;5]"})})]}),Object(a.jsxs)("div",{className:"p-field p-grid ",children:[Object(a.jsx)("label",{htmlFor:"r_value",className:"p-sm-2 p-md-4 p-xl-6",children:"R:"}),Object(a.jsx)("div",{className:"p-sm-12 p-md-7 p-xl-5 p-col",children:Object(a.jsx)(b.InputNumber,{id:"r_value",value:e.r,onValueChange:function(t){return e.setR(t.value)},mode:"decimal",min:-3,max:5,minFractionDigits:1,maxFractionDigits:5,placeholder:"Enter R [-3;5]"})})]}),Object(a.jsx)("div",{className:"p-sm-12 p-md-6  p-align-center p-col",children:Object(a.jsx)(j.Button,{type:"button",onClick:function(){e.validate()&&fetch("/api/app/area",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer_".concat(f.getState().token)},body:JSON.stringify({x:e.x,y:e.y,r:e.r})}).then((function(t){return t.text().then((function(n){t.ok&&e.setResults(JSON.parse(n)),403==t.status&&fetch("/api/refresh/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh_token:sessionStorage.getItem("refresh_token")})}).then((function(t){return t.json().then((function(n){t.ok?(f.dispatch({type:"TOKEN_UPDATE",token:n.token}),fetch("/api/app/area",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer_".concat(f.getState().token)},body:JSON.stringify({x:e.x,y:e.y,r:e.r})}).then((function(t){return t.text().then((function(n){t.ok?e.setResults(JSON.parse(n)):e.messageText.current.show({severity:"error",summary:"Refresh token error"})}))}))):e.messageText.current.show({severity:"error",summary:"Refresh token error"})}))}))}))}))},className:"p-button-primary p-margin",label:"Submit",icon:"pi"})}),Object(a.jsx)("div",{className:"p-sm-12 p-md-6 p-xl-3 p-align-center p-col",children:Object(a.jsx)(j.Button,{type:"button",onClick:function(){fetch("/api/app/clear",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer_".concat(f.getState().token)}}).then((function(t){t.ok&&e.setResults(null),403==t.status&&fetch("/api/refresh/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh_token:sessionStorage.getItem("refresh_token")})}).then((function(t){return t.json().then((function(n){t.ok?(f.dispatch({type:"TOKEN_UPDATE",token:n.token}),fetch("/api/app/clear",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer_".concat(f.getState().token)}}).then((function(t){t.ok?e.setResults(null):e.messageText.current.show({severity:"error",summary:"Refresh token error"})}))):e.messageText.current.show({severity:"error",summary:"Refresh token error"})}))}))}))},className:"p-button-primary",label:"Clear",icon:"pi"})})]})]})})},x=function(){f.dispatch({type:"TOKEN_CLEAR",token:null})};var O=function(){return Object(a.jsx)("div",{className:"p-align-center p-fluid",children:Object(a.jsx)("div",{className:"p-sm-12 p-md-6 p-xl-3",children:Object(a.jsx)(j.Button,{type:"button",onClick:x,className:"p-button-primary p-margin",label:"Logout"})})})},y=n(11),k=n(31);var T=function(e){var t=Object(a.jsx)(j.Button,{type:"button",icon:"pi pi-refresh",className:"p-button-text"}),n=Object(a.jsx)(j.Button,{type:"button",icon:"pi pi-cloud",className:"p-button-text"});return Object(a.jsx)("div",{children:Object(a.jsxs)(k.DataTable,{id:"result_table",value:e.results,paginator:!0,rows:10,paginatorLeft:t,paginatorRight:n,children:[Object(a.jsx)(y.Column,{field:"x",header:"x"}),Object(a.jsx)(y.Column,{field:"y",header:"y"}),Object(a.jsx)(y.Column,{field:"r",header:"r"}),Object(a.jsx)(y.Column,{field:"res",header:"result"})]})})};function N(e){return e<0?-1:1}function S(e,t,n,a,r){var s=t-a;e.font="15px courier new",e.beginPath(),e.lineWidth=2,e.moveTo(t,n),e.lineTo(a,r),e.stroke(),e.beginPath(),e.moveTo(a,r),e.lineTo(a+7*N(s),r+7*N(s)),e.lineTo(a-7,r+7),e.fill()}function w(e,t){return e>t?t/6:e/6}function _(e,t,n,a){var r;e.strokeStyle="black",e.fillStyle="black";var s=e.canvas.height*t,o=e.canvas.width*n,i=(e.canvas.height-s)/2,c=(e.canvas.width-o)/2;r=w(o,s),S(e,c,.5*e.canvas.height,e.canvas.width-c,.5*e.canvas.height),e.fillText("X",e.canvas.width-c-10,.5*e.canvas.height+15),S(e,.5*e.canvas.width,e.canvas.height-i,.5*e.canvas.width,i),e.fillText("Y",.5*e.canvas.width+10,i+15);for(var l=0,h=-2;h<=2;h++)0!=h&&(e.fillText(a[l],e.canvas.width/2+6,e.canvas.height/2+r*h+5),e.beginPath(),e.moveTo(e.canvas.width/2-4,e.canvas.height/2+r*h),e.lineTo(e.canvas.width/2+4,e.canvas.height/2+r*h),e.stroke(),l++);for(var u=3,p=-2;p<=2;p++)0!=p&&(e.fillText(a[u],e.canvas.width/2+r*p-5,e.canvas.height/2-10),e.beginPath(),e.moveTo(e.canvas.width/2+r*p,e.canvas.height/2+4),e.lineTo(e.canvas.width/2+r*p,e.canvas.height/2-4),e.stroke(),u--)}function C(e,t){var n=function(e){var t=[];return null!=e?(e=parseFloat(e),t[0]=e,t[1]=e/2,t[2]=-e/2,t[3]=-e):t=["R","R/2","-R/2","-R"],t}(e);t.clearRect(0,0,t.canvas.width,t.canvas.height);w(t.canvas.width,t.canvas.height);t.strokeStyle="#ffc700",t.fillStyle="#ffc700";var a=w(t.canvas.width,t.canvas.height),r=t.canvas.width/2,s=t.canvas.height/2;t.beginPath(),t.moveTo(r,s),t.arc(r,s,a,-Math.PI/2,-Math.PI,!0),t.fill(),t.beginPath(),t.moveTo(r,s),t.lineTo(r+2*a,s),t.lineTo(r,s-a),t.fill(),t.beginPath(),t.moveTo(r,s),t.lineTo(r-2*a,s),t.lineTo(r-2*a,s+a),t.lineTo(r,s+a),t.fill(),_(t,1,1,n),_(t,1,1,n)}function P(e,t,n,a,r,s,o){var i;i=0==n?0:2*w(o.canvas.width,o.canvas.height)/n,o.strokeStyle="rgba(".concat(r,",").concat(s,",0,").concat(a,")"),o.fillStyle="rgba(".concat(r,",").concat(s,",0,").concat(a,")"),o.beginPath(),o.moveTo(o.canvas.width/2+e*i,o.canvas.height/2-t*i),o.arc(o.canvas.width/2+e*i,o.canvas.height/2-t*i,4,0,2*Math.PI),o.fill()}function R(e,t,n){if(t.length>0){var a,r=1;a=t.length>5?t.length-5:0;for(var s=t.length-1;s>=a;s--)console.log(t[s].x+"                           "+parseFloat(t[s].x)),"true"==t[s].res?P(parseFloat(t[s].x.replace(",",".")),parseFloat(t[s].y.replace(",",".")),parseFloat(e.replace(",",".")),5/(5*r),0,255,n):P(parseFloat(t[s].x.replace(",",".")),parseFloat(t[s].y.replace(",",".")),parseFloat(e.replace(",",".")),5/(5*r),255,0,n),r++}}var E=function(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){null!=e.results&&(C(e.r,t.current.getContext("2d")),R(e.r,e.results,t.current.getContext("2d")))}),[C,R,e]),Object(a.jsx)("div",{children:Object(a.jsx)("canvas",{className:"p-align-center",width:"750",height:"500",ref:t,onClick:function(n){!function(e,t,n,a,r,s){var o=n,i=4*w(t.canvas.width,t.canvas.height)/o,c=e.nativeEvent.offsetX,l=e.nativeEvent.offsetY,h=(2*c-t.canvas.width)/i,u=-(2*l-t.canvas.height)/i;console.log((2*c-t.canvas.width)/i),a(h,-3,5)&&a(u,-5,5)&&a(n,-3,5)?fetch("/api/app/area",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer_".concat(f.getState().token)},body:JSON.stringify({x:h,y:u,r:n})}).then((function(e){return e.text().then((function(t){e.ok&&s(JSON.parse(t)),403==e.status&&fetch("/api/refresh/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh_token:sessionStorage.getItem("refresh_token")})}).then((function(e){return e.json().then((function(t){e.ok?(f.dispatch({type:"TOKEN_UPDATE",token:t.token}),fetch("/api/app/area",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer_".concat(f.getState().token)},body:JSON.stringify({x:h,y:u,r:n})}).then((function(e){return e.text().then((function(t){e.ok?s(JSON.parse(t)):r.current.show({severity:"error",summary:"Refresh token error"})}))}))):r.current.show({severity:"error",summary:"Refresh token error"})}))}))}))})):null!==r.current&&r.current.show({severity:"warn",summary:"Validation error"})}(n,t.current.getContext("2d"),e.r,e.validateNumber,e.messageText,e.setResults)}})})};var F,J=function(){var e=Object(r.useState)(null),t=Object(p.a)(e,2),n=t[0],s=t[1],o=Object(r.useState)(null),i=Object(p.a)(o,2),c=i[0],l=i[1],h=Object(r.useState)(null),u=Object(p.a)(h,2),d=u[0],m=u[1],j=Object(r.useState)(null),v=Object(p.a)(j,2),b=v[0],x=v[1],y=Object(r.useRef)();function k(e,t,n){var a=parseFloat(e);return!isNaN(a)&&a>=t&&a<=n}return Object(r.useEffect)((function(){null===n&&fetch("/api/app/results",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer_".concat(f.getState().token)}}).then((function(e){return e.text().then((function(t){e.ok&&s(JSON.parse(t)),403==e.status&&fetch("/api/refresh/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh_token:sessionStorage.getItem("refresh_token")})}).then((function(e){return e.json().then((function(t){e.ok?(f.dispatch({type:"TOKEN_UPDATE",token:t.token}),fetch("/api/app/area",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer_".concat(f.getState().token)},body:JSON.stringify({x:c,y:d,r:b})}).then((function(e){return e.text().then((function(t){e.ok?s(JSON.parse(t)):y.current.show({severity:"error",summary:"Refresh token error"})}))}))):y.current.show({severity:"error",summary:"Refresh token error"})}))}))}))}))})),Object(a.jsxs)("div",{children:[Object(a.jsx)(O,{}),Object(a.jsx)(E,{validateNumber:k,messageText:y,x:c,y:d,r:b,results:n,setResults:s}),Object(a.jsx)(g,{setResults:s,messageText:y,x:c,y:d,r:b,setX:l,setY:m,setR:x,validate:function(){var e=!k(c,-3,5)||!k(d,-5,5)||!k(b,-3,5);return e&&null!==y.current&&y.current.show({severity:"warn",summary:"Validation error"}),!e}}),Object(a.jsx)(T,{results:n})]})},B=(n(83),n(32)),A=n(33);var I=function(){var e=Object(r.useState)(""),t=Object(p.a)(e,2),n=t[0],s=t[1],o=Object(r.useState)(""),i=Object(p.a)(o,2),c=i[0],l=i[1];return Object(a.jsx)("div",{className:"p-align-center p-fluid",children:Object(a.jsxs)("form",{className:"form_div",children:[Object(a.jsx)(v.Messages,{icon:!0,ref:function(e){return F=e}}),Object(a.jsxs)("div",{className:"p-field p-grid",children:[Object(a.jsxs)("div",{className:"p-field p-grid",children:[Object(a.jsx)("label",{htmlFor:"username",className:"p-sm-2 p-md-4 p-xl-6",children:"Username"}),Object(a.jsx)("div",{className:"p-sm-12 p-md-7 p-xl-5",children:Object(a.jsx)(B.InputText,{id:"username",value:n,onChange:function(e){return s(e.target.value)}})})]}),Object(a.jsxs)("div",{className:"p-field p-grid ",children:[Object(a.jsx)("label",{htmlFor:"password",className:"p-sm-2 p-md-4 p-xl-6",children:"Password"}),Object(a.jsx)("div",{className:"p-sm-12 p-md-7 p-xl-5 ",children:Object(a.jsx)(A.Password,{id:"password",value:c,onChange:function(e){return l(e.target.value)}})})]}),Object(a.jsx)("div",{className:"p-sm-12 p-md-6  p-align-center",children:Object(a.jsx)(j.Button,{type:"button",onClick:function(e){var t={username:n,password:c};fetch("/api/auth/login",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json;charset=utf-8"}}).then((function(e){return e.json().then((function(t){e.ok?f.dispatch({type:"NEW_TOKEN",token:t.token,rtoken:t.refresh_token}):403===e.status?F.show({severity:"error",summary:t.description}):F.show({severity:"error",summary:"Unhandled error"})}))}))},className:"p-button-primary p-margin",label:"Sign in",icon:"pi"})}),Object(a.jsx)("div",{className:"p-sm-12 p-md-6 p-xl-3 p-align-center",children:Object(a.jsx)(j.Button,{type:"button",onClick:function(e){var t={username:n,password:c};fetch("/api/auth/register",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json;charset=utf-8"}}).then((function(e){return e.json().then((function(t){e.ok?f.dispatch({type:"NEW_TOKEN",token:t.token,rtoken:t.refresh_token}):403===e.status?F.show({severity:"error",summary:t.description}):F.show({severity:"error",summary:"Unhandled error"})}))}))},className:"p-button-primary ",label:"Register",icon:"pi"})})]})]})})},D=n(34),K=(n(86),n(87),function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.store.subscribe((function(){e.setState({reduxState:e.props.store.getState()})}))}},{key:"render",value:function(){return Object(a.jsx)("div",{className:"p-grid p-justify-center wrapper",children:Object(a.jsx)("div",{className:"p-col p-sm-12 p-md-8 p-xl-5",children:Object(a.jsx)(D.Panel,{header:"Antonov Maxim P3214 V8314",children:null!==this.props.store.getState().token?Object(a.jsx)(J,{}):Object(a.jsx)(I,{})})})})}}]),n}(r.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(K,{store:f})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[88,1,2]]]);
//# sourceMappingURL=main.fdac3811.chunk.js.map